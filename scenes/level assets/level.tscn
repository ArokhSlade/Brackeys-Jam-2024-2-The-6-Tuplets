[gd_scene load_steps=21 format=3 uid="uid://bo20eh72d0433"]

[ext_resource type="Script" path="res://scenes/general/game_manager.gd" id="1_dvvai"]
[ext_resource type="PackedScene" uid="uid://ceyaoapmq52di" path="res://camera_3d.tscn" id="2_7cnwm"]
[ext_resource type="Script" path="res://scenes/level assets/scene_transition_zone.gd" id="4_l2sbh"]
[ext_resource type="FontFile" uid="uid://bvd2lkbgxtf83" path="res://fonts/bangers/Bangers.ttf" id="5_xa8se"]
[ext_resource type="PackedScene" uid="uid://dm1e5wfnm1ssy" path="res://scenes/pickups and shelter/build_site.tscn" id="6_to7r2"]
[ext_resource type="PackedScene" uid="uid://benlqovn1gllt" path="res://scenes/pickups and shelter/pickup_straw.tscn" id="7_caxjc"]
[ext_resource type="PackedScene" uid="uid://do8e6ayqb6acm" path="res://scenes/pickups and shelter/pickup_plank.tscn" id="8_yw5vr"]
[ext_resource type="PackedScene" uid="uid://dnga6u54hw306" path="res://scenes/player/player.tscn" id="9_2fse1"]
[ext_resource type="PackedScene" uid="uid://d4ks7dbpwpjs4" path="res://scenes/pickups and shelter/pickup_bricks.tscn" id="9_dqj8j"]
[ext_resource type="PackedScene" uid="uid://cwfqhpyrpe0le" path="res://scenes/level assets/platform.tscn" id="10_8btdo"]
[ext_resource type="PackedScene" uid="uid://qyset6fs0lox" path="res://scenes/menus/pause_menu.tscn" id="11_hqfbd"]
[ext_resource type="Texture2D" uid="uid://c7x2h07viy8tm" path="res://pictures/sky/midday.jpg" id="13_lfdo5"]
[ext_resource type="Texture2D" uid="uid://5h1gjbfnlnpq" path="res://pictures/ui_icons/icon_construction.png" id="14_l3dmy"]
[ext_resource type="Theme" uid="uid://bytk0b1dvpwlo" path="res://fonts/test_ui_headline_theme.theme" id="15_8otoy"]
[ext_resource type="PackedScene" uid="uid://nygjomhu8npw" path="res://scenes/enemy_guard/Enemy_guard.tscn" id="16_e6yl5"]
[ext_resource type="ArrayMesh" uid="uid://8dwf6ppxp5vc" path="res://meshes/platforms/arokh_platform_01.obj" id="16_ef1q3"]
[ext_resource type="Material" uid="uid://cuis7v7i5gbmc" path="res://materials/sandstone.tres" id="17_gf3nq"]
[ext_resource type="PackedScene" uid="uid://bk1j7v5nthfag" path="res://scenes/enemy_guard/check_point.tscn" id="17_oac4o"]

[sub_resource type="BoxShape3D" id="BoxShape3D_og10c"]
size = Vector3(1.33789, 2.6062, 2.03473)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_x4hue"]
data = PackedVector3Array(2.9323, 1.9243, 0, 2.9323, 1.9243, 3.7617, -1.3798, 1.9243, 2.6038, -1.3798, 1.9243, 2.6038, 2.9323, 1.9243, 3.7617, -1.3798, 1.9243, 6.3655, 5.745, -1.9946, 3.7617, 5.745, -1.9946, 0, 2.9323, -1.9946, 3.7617, 2.9323, -1.9946, 3.7617, 5.745, -1.9946, 0, 2.9323, -1.9946, 0, 2.9323, 1.9243, 3.7617, 5.745, 1.9243, 3.7617, 2.9323, -1.9946, 3.7617, 2.9323, -1.9946, 3.7617, 5.745, 1.9243, 3.7617, 5.745, -1.9946, 3.7617, 8.7085, 0.9946, 2.832, 8.7085, 0.9946, 0.9297, 8.7085, -1.0649, 2.832, 8.7085, -1.0649, 2.832, 8.7085, 0.9946, 0.9297, 8.7085, -1.0649, 0.9297, 2.9323, 1.9243, 3.7617, 2.9323, 1.9243, 0, 5.745, 1.9243, 3.7617, 5.745, 1.9243, 3.7617, 2.9323, 1.9243, 0, 5.745, 1.9243, 0, 2.9323, -1.9946, 3.7617, 2.9323, -1.9946, 0, -1.3798, -1.9946, 6.3655, -1.3798, -1.9946, 6.3655, 2.9323, -1.9946, 0, -1.3798, -1.9946, 2.6038, 2.9323, 1.9243, 3.7617, 2.9323, -1.9946, 3.7617, -1.3798, 1.9243, 6.3655, -1.3798, 1.9243, 6.3655, 2.9323, -1.9946, 3.7617, -1.3798, -1.9946, 6.3655, 2.9323, -1.9946, 0, 2.9323, 1.9243, 0, -1.3798, -1.9946, 2.6038, -1.3798, -1.9946, 2.6038, 2.9323, 1.9243, 0, -1.3798, 1.9243, 2.6038, -1.3798, 1.9243, 2.6038, -1.3798, 1.9243, 6.3655, -4.8426, 1.9243, 2.6038, -4.8426, 1.9243, 2.6038, -1.3798, 1.9243, 6.3655, -4.8426, 1.9243, 6.3655, -7.6008, -0.9852, 5.3561, -7.6008, -0.9852, 3.6133, -7.6008, 0.9149, 5.3561, -7.6008, 0.9149, 5.3561, -7.6008, -0.9852, 3.6133, -7.6008, 0.9149, 3.6133, -1.3798, -1.9946, 6.3655, -1.3798, -1.9946, 2.6038, -4.8426, -1.9946, 6.3655, -4.8426, -1.9946, 6.3655, -1.3798, -1.9946, 2.6038, -4.8426, -1.9946, 2.6038, -1.3798, 1.9243, 6.3655, -1.3798, -1.9946, 6.3655, -4.8426, 1.9243, 6.3655, -4.8426, 1.9243, 6.3655, -1.3798, -1.9946, 6.3655, -4.8426, -1.9946, 6.3655, -4.8426, -1.9946, 2.6038, -4.8426, 1.9243, 2.6038, -7.6008, -0.9852, 3.6133, -7.6008, -0.9852, 3.6133, -4.8426, 1.9243, 2.6038, -7.6008, 0.9149, 3.6133, -4.8426, -1.9946, 6.3655, -4.8426, -1.9946, 2.6038, -7.6008, -0.9852, 5.3561, -7.6008, -0.9852, 5.3561, -4.8426, -1.9946, 2.6038, -7.6008, -0.9852, 3.6133, -4.8426, 1.9243, 6.3655, -4.8426, -1.9946, 6.3655, -7.6008, 0.9149, 5.3561, -7.6008, 0.9149, 5.3561, -4.8426, -1.9946, 6.3655, -7.6008, -0.9852, 5.3561, -4.8426, 1.9243, 2.6038, -4.8426, 1.9243, 6.3655, -7.6008, 0.9149, 3.6133, -7.6008, 0.9149, 3.6133, -4.8426, 1.9243, 6.3655, -7.6008, 0.9149, 5.3561, -1.3798, -1.9946, 2.6038, -1.3798, 1.9243, 2.6038, -4.8426, -1.9946, 2.6038, -4.8426, -1.9946, 2.6038, -1.3798, 1.9243, 2.6038, -4.8426, 1.9243, 2.6038, 8.7085, 0.9946, 0.9297, 8.7085, 0.9946, 2.832, 5.745, 1.9243, 0, 5.745, 1.9243, 0, 8.7085, 0.9946, 2.832, 5.745, 1.9243, 3.7617, 5.745, 1.9243, 0, 5.745, -1.9946, 0, 8.7085, 0.9946, 0.9297, 8.7085, 0.9946, 0.9297, 5.745, -1.9946, 0, 8.7085, -1.0649, 0.9297, 5.745, -1.9946, 3.7617, 5.745, 1.9243, 3.7617, 8.7085, -1.0649, 2.832, 8.7085, -1.0649, 2.832, 5.745, 1.9243, 3.7617, 8.7085, 0.9946, 2.832, 5.745, -1.9946, 0, 5.745, -1.9946, 3.7617, 8.7085, -1.0649, 0.9297, 8.7085, -1.0649, 0.9297, 5.745, -1.9946, 3.7617, 8.7085, -1.0649, 2.832, 5.745, 1.9243, 0, 2.9323, 1.9243, 0, 5.745, -1.9946, 0, 5.745, -1.9946, 0, 2.9323, 1.9243, 0, 2.9323, -1.9946, 0)

[node name="Level" type="Node"]
script = ExtResource("1_dvvai")
time_limit = 25.0

[node name="MenuCanvas" type="CanvasLayer" parent="."]
process_mode = 3

[node name="PauseMenu" parent="MenuCanvas" instance=ExtResource("11_hqfbd")]
process_mode = 3
visible = false

[node name="Sky" type="Sprite3D" parent="."]
transform = Transform3D(66.435, 0, 0, 0, 66.435, 0, 0, 0, 66.435, 0, 0, -1000)
visible = false
texture = ExtResource("13_lfdo5")

[node name="PastGameTimer" type="Timer" parent="."]
wait_time = 1.5
one_shot = true

[node name="StormTimer" type="Timer" parent="."]
one_shot = true
autostart = true

[node name="LevelUI" type="CanvasLayer" parent="."]
layer = -50

[node name="TextureRect" type="TextureRect" parent="LevelUI"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -93.0
offset_top = -333.0
offset_right = 59.0
offset_bottom = -181.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 0
texture = ExtResource("14_l3dmy")
expand_mode = 2

[node name="ProgressLabel" type="Label" parent="LevelUI"]
unique_name_in_owner = true
offset_left = 722.0
offset_top = 61.0
offset_right = 840.0
offset_bottom = 155.0
size_flags_horizontal = 4
size_flags_vertical = 0
theme = ExtResource("15_8otoy")
text = "0/N"

[node name="TimerLabel" type="Label" parent="LevelUI"]
unique_name_in_owner = true
offset_left = 963.0
offset_top = 63.0
offset_right = 1117.0
offset_bottom = 149.0
size_flags_horizontal = 4
size_flags_vertical = 0
theme = ExtResource("15_8otoy")
text = "12.34"

[node name="GameOverLabel" type="Label" parent="LevelUI"]
unique_name_in_owner = true
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("15_8otoy")
text = "Game Over Message"

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.714754, -0.477768, 0.51075, 0, 0.730293, 0.683134, -0.699376, -0.488272, 0.52198, 0, 2.14895, 0)
light_energy = 1.323

[node name="Camera3D" parent="." node_paths=PackedStringArray("player") instance=ExtResource("2_7cnwm")]
player = NodePath("../Player")

[node name="LoseGameZone" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15.4376, 0.996671, 0)
script = ExtResource("4_l2sbh")

[node name="Label3D" type="Label3D" parent="LoseGameZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.02227, 1, -0.5)
text = "Lose Game <-"
font = ExtResource("5_xa8se")
font_size = 117

[node name="Area3D" type="Area3D" parent="LoseGameZone"]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="LoseGameZone/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.168945, 0.456177, -0.0162659)
shape = SubResource("BoxShape3D_og10c")

[node name="Player" parent="." instance=ExtResource("9_2fse1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.29545, 0)
player_health = 3

[node name="BuildSite" parent="." instance=ExtResource("6_to7r2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.306323, 0)

[node name="BuildingMaterials" type="Node" parent="."]

[node name="BuildingMaterial" parent="BuildingMaterials" instance=ExtResource("7_caxjc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12, 8, 0)

[node name="BuildingMaterial2" parent="BuildingMaterials" instance=ExtResource("8_yw5vr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 35.3791, -0.172282, -9.53674e-07)

[node name="BuildingMaterial3" parent="BuildingMaterials" instance=ExtResource("8_yw5vr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 13, 0)

[node name="BuildingMaterial4" parent="BuildingMaterials" instance=ExtResource("9_dqj8j")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 1, 0)

[node name="Platforms" type="Node" parent="."]

[node name="Platform1" parent="Platforms" instance=ExtResource("10_8btdo")]

[node name="Platform2" parent="Platforms" instance=ExtResource("10_8btdo")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15.4817, 11.4019, 0)

[node name="Platform3" parent="Platforms" instance=ExtResource("10_8btdo")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 29.7391, 5.87821, 0)

[node name="EnemyGuards" type="Node" parent="."]

[node name="Enemy2" parent="EnemyGuards" instance=ExtResource("16_e6yl5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.7234, 13.0162, 0)

[node name="Enemy" parent="EnemyGuards" instance=ExtResource("16_e6yl5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.46947, 0.94716, 0)

[node name="Enemy3" parent="EnemyGuards" instance=ExtResource("16_e6yl5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20.7807, 6.79375, 0)

[node name="Enemy4" parent="EnemyGuards" instance=ExtResource("16_e6yl5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 27.9466, -3.20008, 0)

[node name="Node3D" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 43.3096, -3.10855, 3.26284)

[node name="StaticBody3D" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15.0966, -3.61228, -3.86286)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.19209e-07, 3.08389)
mesh = ExtResource("16_ef1q3")
surface_material_override/0 = ExtResource("17_gf3nq")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.19209e-07, 3.08389)
shape = SubResource("ConcavePolygonShape3D_x4hue")

[node name="CheckPoints" type="Node" parent="."]

[node name="CheckPoint <-" parent="CheckPoints" instance=ExtResource("17_oac4o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.2499, 0.237534, 0)

[node name="CheckPoint ->" parent="CheckPoints" instance=ExtResource("17_oac4o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.566, 0, 0)
go_left = false

[node name="CheckPoint <-4" parent="CheckPoints" instance=ExtResource("17_oac4o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 36.1051, -2.85845, 0)

[node name="CheckPoint ->4" parent="CheckPoints" instance=ExtResource("17_oac4o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 21.3495, -5.39929, 0)
go_left = false

[node name="CheckPoint <-2" parent="CheckPoints" instance=ExtResource("17_oac4o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 30.9536, 6.55748, 0)

[node name="CheckPoint ->2" parent="CheckPoints" instance=ExtResource("17_oac4o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.9549, 6.55748, 0)
go_left = false

[node name="CheckPoint <-3" parent="CheckPoints" instance=ExtResource("17_oac4o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.9581, 11.9324, 0)

[node name="CheckPoint ->3" parent="CheckPoints" instance=ExtResource("17_oac4o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18.0405, 11.9324, 0)
go_left = false

[connection signal="timeout" from="PastGameTimer" to="." method="_on_past_game_timer_timeout"]
[connection signal="timeout" from="StormTimer" to="." method="lose_game"]
[connection signal="entered_game_over_zone" from="LoseGameZone" to="." method="lose_game"]
[connection signal="body_entered" from="LoseGameZone/Area3D" to="LoseGameZone" method="_on_area_3d_body_entered"]
[connection signal="died" from="Player" to="." method="lose_game"]
[connection signal="died" from="Player" to="Camera3D" method="_on_player_died"]
[connection signal="material_received" from="BuildSite" to="." method="_on_build_site_material_received"]
